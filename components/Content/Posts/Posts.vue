<template>
  <v-card>
    <v-card-text>
      <v-form v-model="valid" lazy-validation ref="post" @submit="submitPost">
        <v-card>
          <v-card-title class="justify-content-center">
            <h3 class="title">Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡ Ø¬Ø¯ÛŒØ¯ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯</h3> &nbsp;
            <span class="caption grey--text text--darken-1">*Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡ Ø¬Ø¯ÛŒØ¯ Ø«Ø¨Øªâ€Œ Ú©Ù†ÛŒØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù¾Ø³ Ø§Ø² Ø«Ø¨ØªØŒ Ø§Ø² Ù…Ù†ÙˆÛŒ Ø³Ù…Øª Ú†Ù¾ Ù‡Ø± Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡ØŒ Ø¢Ù† Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯.</span>
          </v-card-title>
          <v-card-text>
            <v-container grid-list-md fluid>
              <v-layout row wrap>
                <v-flex xs12>
                  <v-select
                    v-model="composed.to"
                    :rules="rules.to"
                    :items="people"
                    item-text="name"
                    item-value="username"
                    label="Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡ Ø¨Ø±Ø§ÛŒ Ú†Ù‡ Ú©Ø³ÛŒ Ø§Ø³ØªØŸ (Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ¯ Ù…ÛŒ Ù†ÙˆÛŒØ³ÛŒØ¯ Ù†ÛŒØ² Ø§Ø³Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯)"
                    class="input-group--focused"
                    required
                    autocomplete
                    deletable-chips
                    chips
                    flat
                  />
                </v-flex>
                <v-flex xs12>
                  <v-text-field
                    v-model="composed.title"
                    :rules="rules.title"
                    label="Ø¹Ù†ÙˆØ§Ù† Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡"
                    required
                  />
                </v-flex>
                <v-flex xs12>
                  <v-text-field
                    v-model="composed.body"
                    :rules="rules.body"
                    box
                    required
                    multi-line
                    label="Ù…ØªÙ† Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡"
                    placeholder="ÛŒØ§Ø¯Ø´ Ø¨Ø®ÛŒØ± Ø§ÙˆÙ† Ø²Ù…ÙˆÙ†Ø§..."/>
                </v-flex>
              </v-layout>
            </v-container>
          </v-card-text>
          <v-card-actions class="d-flex justify-content-center">
            <input :v-model="composed.file" name="image" type="file" ref="file" accept="image/*" style="display: none;">
            <v-btn @click="clickFile" type="button">
              <v-icon small>cloud_upload</v-icon>
              Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³
            </v-btn>
            <v-btn color="success" type="submit">
              <v-icon small>check</v-icon>
              Ø«Ø¨Øª Ù¾Ø³Øª
            </v-btn>
          </v-card-actions>
        </v-card>
      </v-form>
      <v-divider/>
      <v-card>
        <v-card-title class="justify-content-center">
          <h3 class="title">Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ ØªÙˆØ³Ø· Ù…Ù†</h3>
        </v-card-title>
        <v-card-text>
          <div v-for="(post,index) in posts" :key="index">
            <post :postData="post" v-on:removeMe="removePost(index)"/>
          </div>
        </v-card-text>
      </v-card>
    </v-card-text>
  </v-card>
</template>

<script>
  import Post from '~/components/Content/Posts/Post.vue'
  export default {
    name: "posts",
    data() {
      return {
        removeFlag: true,
        uploadOptions: {
          url: (files) => {
            this.composed.file = files[0];
            return "";
          },
          maxFiles: 1,
          addRemoveLinks: true,
          acceptedFiles: 'image/*',
          thumbnailWidth: 300,
        },
        editorOption: {
          placeholder: '',
          // some quill options
          modules: {
            toolbar: [
              ['bold', 'italic', 'underline', 'strike'],
              ['blockquote', 'code-block'],
              [{'list': 'ordered'}, {'list': 'bullet'}],
            ]
          }
        },
        valid: true,
        event: '',
        rules: {
          to: [v => !!v || 'Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯ Ø§ÛŒÙ† Ø¯Ù„Ù†ÙˆØ´ØªÙ‡ Ø¨Ø±Ø§ÛŒ Ú©ÛŒØ³Øª'],
          title: [v => !!v || 'ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª'],
          body: [v => !!v || 'ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ù…ØªÙ† Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª'],
          file: ''
        },
        composed: {
          to: '',
          title: '',
          body: '',
          file: ''
        },
        posts: [
          {
            _id: '_dummy_id',
            title: 'Ø¢Ø±ÛŒ Ø§ÛŒÙ†Ú†Ù†ÛŒÙ† Ø¨ÙˆØ¯ Ø§ÛŒ Ø¨Ø±Ø§Ø¯Ø±',
            body: 'Ù„ÙˆØ±Ù… Ø§ÛŒÙ¾Ø³ÙˆÙ… Ù…ØªÙ† Ø³Ø§Ø®ØªÚ¯ÛŒ Ø¨Ø§ ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø¯Ú¯ÛŒ Ù†Ø§Ù…ÙÙ‡ÙˆÙ… Ø§Ø² ØµÙ†Ø¹Øª Ú†Ø§Ù¾ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø·Ø±Ø§Ø­Ø§Ù† Ú¯Ø±Ø§ÙÛŒÚ© Ø§Ø³Øª. Ú†Ø§Ù¾Ú¯Ø±Ù‡Ø§ Ùˆ Ù…ØªÙˆÙ† Ø¨Ù„Ú©Ù‡ Ø±ÙˆØ²Ù†Ø§Ù…Ù‡ Ùˆ Ù…Ø¬Ù„Ù‡ Ø¯Ø± Ø³ØªÙˆÙ† Ùˆ Ø³Ø·Ø±Ø¢Ù†Ú†Ù†Ø§Ù† Ú©Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø§ÛŒØ· ÙØ¹Ù„ÛŒ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ø¨Ø§ Ù‡Ø¯Ù Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ú©ØªØ§Ø¨Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø± Ø´ØµØª Ùˆ Ø³Ù‡ Ø¯Ø±ØµØ¯ Ú¯Ø°Ø´ØªÙ‡ØŒ Ø­Ø§Ù„ Ùˆ Ø¢ÛŒÙ†Ø¯Ù‡ Ø´Ù†Ø§Ø®Øª ÙØ±Ø§ÙˆØ§Ù† Ø¬Ø§Ù…Ø¹Ù‡ Ùˆ Ù…ØªØ®ØµØµØ§Ù† Ø±Ø§ Ù…ÛŒ Ø·Ù„Ø¨Ø¯ ØªØ§ Ø¨Ø§ Ù†Ø±Ù… Ø§ÙØ²Ø§Ø±Ù‡Ø§ Ø´Ù†Ø§Ø®Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­Ø§Ù† Ø±Ø§ÛŒØ§Ù†Ù‡ Ø§ÛŒ Ø¹Ù„ÛŒ Ø§Ù„Ø®ØµÙˆØµ Ø·Ø±Ø§Ø­Ø§Ù† Ø®Ù„Ø§Ù‚ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ Ù¾ÛŒØ´Ø±Ùˆ Ø¯Ø± Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯. Ø¯Ø± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ù…ÛŒØ¯ Ø¯Ø§Ø´Øª Ú©Ù‡ ØªÙ…Ø§Ù… Ùˆ Ø¯Ø´ÙˆØ§Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ Ùˆ Ø´Ø±Ø§ÛŒØ· Ø³Ø®Øª ØªØ§ÛŒÙ¾ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø¯ ÙˆØ²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ø§Ù…Ù„ Ø­Ø±ÙˆÙÚ†ÛŒÙ†ÛŒ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ùˆ Ø¬ÙˆØ§Ø¨Ú¯ÙˆÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÛŒÙˆØ³ØªÙ‡ Ø§Ù‡Ù„ Ø¯Ù†ÛŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø·Ø±Ø§Ø­ÛŒ Ø§Ø³Ø§Ø³Ø§ Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯.\n' +
            '\n' +
            'Ù„ÙˆØ±Ù… Ø§ÛŒÙ¾Ø³ÙˆÙ… Ù…ØªÙ† Ø³Ø§Ø®ØªÚ¯ÛŒ Ø¨Ø§ ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø¯Ú¯ÛŒ Ù†Ø§Ù…ÙÙ‡ÙˆÙ… Ø§Ø² ØµÙ†Ø¹Øª Ú†Ø§Ù¾ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø·Ø±Ø§Ø­Ø§Ù† Ú¯Ø±Ø§ÙÛŒÚ© Ø§Ø³Øª. Ú†Ø§Ù¾Ú¯Ø±Ù‡Ø§ Ùˆ Ù…ØªÙˆÙ† Ø¨Ù„Ú©Ù‡ Ø±ÙˆØ²Ù†Ø§Ù…Ù‡ Ùˆ Ù…Ø¬Ù„Ù‡ Ø¯Ø± Ø³ØªÙˆÙ† Ùˆ Ø³Ø·Ø±Ø¢Ù†Ú†Ù†Ø§Ù† Ú©Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø§ÛŒØ· ÙØ¹Ù„ÛŒ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ø¨Ø§ Ù‡Ø¯Ù Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ú©ØªØ§Ø¨Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø± Ø´ØµØª Ùˆ Ø³Ù‡ Ø¯Ø±ØµØ¯ Ú¯Ø°Ø´ØªÙ‡ØŒ Ø­Ø§Ù„ Ùˆ Ø¢ÛŒÙ†Ø¯Ù‡ Ø´Ù†Ø§Ø®Øª ÙØ±Ø§ÙˆØ§Ù† Ø¬Ø§Ù…Ø¹Ù‡ Ùˆ Ù…ØªØ®ØµØµØ§Ù† Ø±Ø§ Ù…ÛŒ Ø·Ù„Ø¨Ø¯ ØªØ§ Ø¨Ø§ Ù†Ø±Ù… Ø§ÙØ²Ø§Ø±Ù‡Ø§ Ø´Ù†Ø§Ø®Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­Ø§Ù† Ø±Ø§ÛŒØ§Ù†Ù‡ Ø§ÛŒ Ø¹Ù„ÛŒ Ø§Ù„Ø®ØµÙˆØµ Ø·Ø±Ø§Ø­Ø§Ù† Ø®Ù„Ø§Ù‚ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ Ù¾ÛŒØ´Ø±Ùˆ Ø¯Ø± Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯. Ø¯Ø± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ù…ÛŒØ¯ Ø¯Ø§Ø´Øª Ú©Ù‡ ØªÙ…Ø§Ù… Ùˆ Ø¯Ø´ÙˆØ§Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ Ùˆ Ø´Ø±Ø§ÛŒØ· Ø³Ø®Øª ØªØ§ÛŒÙ¾ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø¯ ÙˆØ²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ø§Ù…Ù„ Ø­Ø±ÙˆÙÚ†ÛŒÙ†ÛŒ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ùˆ Ø¬ÙˆØ§Ø¨Ú¯ÙˆÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÛŒÙˆØ³ØªÙ‡ Ø§Ù‡Ù„ Ø¯Ù†ÛŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø·Ø±Ø§Ø­ÛŒ Ø§Ø³Ø§Ø³Ø§ Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯.Ù„ÙˆØ±Ù… Ø§ÛŒÙ¾Ø³ÙˆÙ… Ù…ØªÙ† Ø³Ø§Ø®ØªÚ¯ÛŒ Ø¨Ø§ ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø¯Ú¯ÛŒ Ù†Ø§Ù…ÙÙ‡ÙˆÙ… Ø§Ø² ØµÙ†Ø¹Øª Ú†Ø§Ù¾ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø·Ø±Ø§Ø­Ø§Ù† Ú¯Ø±Ø§ÙÛŒÚ© Ø§Ø³Øª. Ú†Ø§Ù¾Ú¯Ø±Ù‡Ø§ Ùˆ Ù…ØªÙˆÙ† Ø¨Ù„Ú©Ù‡ Ø±ÙˆØ²Ù†Ø§Ù…Ù‡ Ùˆ Ù…Ø¬Ù„Ù‡ Ø¯Ø± Ø³ØªÙˆÙ† Ùˆ Ø³Ø·Ø±Ø¢Ù†Ú†Ù†Ø§Ù† Ú©Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø§ÛŒØ· ÙØ¹Ù„ÛŒ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ø¨Ø§ Ù‡Ø¯Ù Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ú©ØªØ§Ø¨Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø± Ø´ØµØª Ùˆ Ø³Ù‡ Ø¯Ø±ØµØ¯ Ú¯Ø°Ø´ØªÙ‡ØŒ Ø­Ø§Ù„ Ùˆ Ø¢ÛŒÙ†Ø¯Ù‡ Ø´Ù†Ø§Ø®Øª ÙØ±Ø§ÙˆØ§Ù† Ø¬Ø§Ù…Ø¹Ù‡ Ùˆ Ù…ØªØ®ØµØµØ§Ù† Ø±Ø§ Ù…ÛŒ Ø·Ù„Ø¨Ø¯ ØªØ§ Ø¨Ø§ Ù†Ø±Ù… Ø§ÙØ²Ø§Ø±Ù‡Ø§ Ø´Ù†Ø§Ø®Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­Ø§Ù† Ø±Ø§ÛŒØ§Ù†Ù‡ Ø§ÛŒ Ø¹Ù„ÛŒ Ø§Ù„Ø®ØµÙˆØµ Ø·Ø±Ø§Ø­Ø§Ù† Ø®Ù„Ø§Ù‚ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ Ù¾ÛŒØ´Ø±Ùˆ Ø¯Ø± Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯. Ø¯Ø± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ù…ÛŒØ¯ Ø¯Ø§Ø´Øª Ú©Ù‡ ØªÙ…Ø§Ù… Ùˆ Ø¯Ø´ÙˆØ§Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ Ùˆ Ø´Ø±Ø§ÛŒØ· Ø³Ø®Øª ØªØ§ÛŒÙ¾ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø¯ ÙˆØ²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ø§Ù…Ù„ Ø­Ø±ÙˆÙÚ†ÛŒÙ†ÛŒ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ùˆ Ø¬ÙˆØ§Ø¨Ú¯ÙˆÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÛŒÙˆØ³ØªÙ‡ Ø§Ù‡Ù„ Ø¯Ù†ÛŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø·Ø±Ø§Ø­ÛŒ Ø§Ø³Ø§Ø³Ø§ Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯.\n' +
            '\n' +
            'Ù„ÙˆØ±Ù… Ø§ÛŒÙ¾Ø³ÙˆÙ… Ù…ØªÙ† Ø³Ø§Ø®ØªÚ¯ÛŒ Ø¨Ø§ ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø¯Ú¯ÛŒ Ù†Ø§Ù…ÙÙ‡ÙˆÙ… Ø§Ø² ØµÙ†Ø¹Øª Ú†Ø§Ù¾ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø·Ø±Ø§Ø­Ø§Ù† Ú¯Ø±Ø§ÙÛŒÚ© Ø§Ø³Øª. Ú†Ø§Ù¾Ú¯Ø±Ù‡Ø§ Ùˆ Ù…ØªÙˆÙ† Ø¨Ù„Ú©Ù‡ Ø±ÙˆØ²Ù†Ø§Ù…Ù‡ Ùˆ Ù…Ø¬Ù„Ù‡ Ø¯Ø± Ø³ØªÙˆÙ† Ùˆ Ø³Ø·Ø±Ø¢Ù†Ú†Ù†Ø§Ù† Ú©Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø§ÛŒØ· ÙØ¹Ù„ÛŒ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ø¨Ø§ Ù‡Ø¯Ù Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ú©ØªØ§Ø¨Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø± Ø´ØµØª Ùˆ Ø³Ù‡ Ø¯Ø±ØµØ¯ Ú¯Ø°Ø´ØªÙ‡ØŒ Ø­Ø§Ù„ Ùˆ Ø¢ÛŒÙ†Ø¯Ù‡ Ø´Ù†Ø§Ø®Øª ÙØ±Ø§ÙˆØ§Ù† Ø¬Ø§Ù…Ø¹Ù‡ Ùˆ Ù…ØªØ®ØµØµØ§Ù† Ø±Ø§ Ù…ÛŒ Ø·Ù„Ø¨Ø¯ ØªØ§ Ø¨Ø§ Ù†Ø±Ù… Ø§ÙØ²Ø§Ø±Ù‡Ø§ Ø´Ù†Ø§Ø®Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­Ø§Ù† Ø±Ø§ÛŒØ§Ù†Ù‡ Ø§ÛŒ Ø¹Ù„ÛŒ Ø§Ù„Ø®ØµÙˆØµ Ø·Ø±Ø§Ø­Ø§Ù† Ø®Ù„Ø§Ù‚ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ Ù¾ÛŒØ´Ø±Ùˆ Ø¯Ø± Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯. Ø¯Ø± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ù…ÛŒØ¯ Ø¯Ø§Ø´Øª Ú©Ù‡ ØªÙ…Ø§Ù… Ùˆ Ø¯Ø´ÙˆØ§Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ Ùˆ Ø´Ø±Ø§ÛŒØ· Ø³Ø®Øª ØªØ§ÛŒÙ¾ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø¯ ÙˆØ²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ø§Ù…Ù„ Ø­Ø±ÙˆÙÚ†ÛŒÙ†ÛŒ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ùˆ Ø¬ÙˆØ§Ø¨Ú¯ÙˆÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÛŒÙˆØ³ØªÙ‡ Ø§Ù‡Ù„ Ø¯Ù†ÛŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø·Ø±Ø§Ø­ÛŒ Ø§Ø³Ø§Ø³Ø§ Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯.',
            image: 'https://realfavicongenerator.net/assets/images/sample/colorful/fb-editor-1.png',
            date: new Date(),
            approved: true,
            user: {
              id: '_dummydata',
              username: '9331009',
              name: 'Ø§Ù…ÛŒØ± Ø­Ù‚ÛŒÙ‚ØªÛŒ Ù…Ù„Ú©ÛŒ'
            },
            to: {
              id: '_dummydata',
              username: '9331031',
              name: 'Ù…Ø§Ù†Ø§ Ù¾ÙˆØ³ØªÛŒâ€ŒØ²Ø§Ø¯Ù‡'
            }
          },
          {
            _id: '_dummy_id',
            title: 'Ø¢Ø±ÛŒ Ø§ÛŒÙ†Ú†Ù†ÛŒÙ† Ø¨ÙˆØ¯ Ø§ÛŒ Ø¨Ø±Ø§Ø¯Ø±',
            body: 'Ù„ÙˆØ±Ù… Ø§ÛŒÙ¾Ø³ÙˆÙ… Ù…ØªÙ† Ø³Ø§Ø®ØªÚ¯ÛŒ Ø¨Ø§ ØªÙˆÙ„ÛŒØ¯ Ø³Ø§Ø¯Ú¯ÛŒ Ù†Ø§Ù…ÙÙ‡ÙˆÙ… Ø§Ø² ØµÙ†Ø¹Øª Ú†Ø§Ù¾ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø·Ø±Ø§Ø­Ø§Ù† Ú¯Ø±Ø§ÙÛŒÚ© Ø§Ø³Øª. Ú†Ø§Ù¾Ú¯Ø±Ù‡Ø§ Ùˆ Ù…ØªÙˆÙ† Ø¨Ù„Ú©Ù‡ Ø±ÙˆØ²Ù†Ø§Ù…Ù‡ Ùˆ Ù…Ø¬Ù„Ù‡ Ø¯Ø± Ø³ØªÙˆÙ† Ùˆ Ø³Ø·Ø±Ø¢Ù†Ú†Ù†Ø§Ù† Ú©Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª Ùˆ Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø§ÛŒØ· ÙØ¹Ù„ÛŒ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ø¨Ø§ Ù‡Ø¯Ù Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯. Ú©ØªØ§Ø¨Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø± Ø´ØµØª Ùˆ Ø³Ù‡ Ø¯Ø±ØµØ¯ Ú¯Ø°Ø´ØªÙ‡ØŒ Ø­Ø§Ù„ Ùˆ Ø¢ÛŒÙ†Ø¯Ù‡ Ø´Ù†Ø§Ø®Øª ÙØ±Ø§ÙˆØ§Ù† Ø¬Ø§Ù…Ø¹Ù‡ Ùˆ Ù…ØªØ®ØµØµØ§Ù† Ø±Ø§ Ù…ÛŒ Ø·Ù„Ø¨Ø¯ ØªØ§ Ø¨Ø§ Ù†Ø±Ù… Ø§ÙØ²Ø§Ø±Ù‡Ø§ Ø´Ù†Ø§Ø®Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­Ø§Ù† Ø±Ø§ÛŒØ§Ù†Ù‡ Ø§ÛŒ Ø¹Ù„ÛŒ Ø§Ù„Ø®ØµÙˆØµ Ø·Ø±Ø§Ø­Ø§Ù† Ø®Ù„Ø§Ù‚ÛŒ Ùˆ ÙØ±Ù‡Ù†Ú¯ Ù¾ÛŒØ´Ø±Ùˆ Ø¯Ø± Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯. Ø¯Ø± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ù…ÛŒØ¯ Ø¯Ø§Ø´Øª Ú©Ù‡ ØªÙ…Ø§Ù… Ùˆ Ø¯Ø´ÙˆØ§Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ Ùˆ Ø´Ø±Ø§ÛŒØ· Ø³Ø®Øª ØªØ§ÛŒÙ¾ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³Ø¯ ÙˆØ²Ù…Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ø§Ù…Ù„ Ø­Ø±ÙˆÙÚ†ÛŒÙ†ÛŒ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ùˆ Ø¬ÙˆØ§Ø¨Ú¯ÙˆÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÛŒÙˆØ³ØªÙ‡ Ø§Ù‡Ù„ Ø¯Ù†ÛŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø·Ø±Ø§Ø­ÛŒ Ø§Ø³Ø§Ø³Ø§ Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯.',
            date: new Date(),
            approved: true,
            user: {
              id: '_dummydata',
              username: '9331009',
              name: 'Ø§Ù…ÛŒØ± Ø­Ù‚ÛŒÙ‚ØªÛŒ Ù…Ù„Ú©ÛŒ'
            },
            to: {
              id: '_dummydata',
              username: '9331009',
              name: 'Ø§Ù…ÛŒØ± Ø­Ù‚ÛŒÙ‚ØªÛŒ Ù…Ù„Ú©ÛŒ'
            }
          },
        ],
        people: []
      }
    },
    mounted() {
      this.fetchPeople()
      // this.insertEmoji('ðŸ™‚');
    },
    notifications: {
      showError: {
        title: 'Ø®Ø·Ø§',
        message: 'Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯...',
        type: 'error'
      },
      showSubmissionSuccess: {
        title: 'Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯',
        message: 'Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯.',
        type: 'success'
      },
      showDeletionSuccess: {
        title: 'Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯',
        message: 'Ø¯Ù„â€ŒÙ†ÙˆØ´ØªÙ‡ Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.',
        type: 'success'
      }
    },
    filters: {
      makeParsi: function (value) {
        if (!value) return '';
        return persianJs(value.toString()).englishNumber().toString();
      }
    },

    methods: {
      clickFile() {
        this.$refs.file.click()
      },
      async fetchPeople() {
        // this.tarins = await this.$axios.get('people')
        this.people = [
          {username: '9331001', name: 'Ø®ÛŒØ§Ø± Ø®ÛŒØ§Ø±ÛŒ'},
          {username: '9331002', name: 'Ø§ÛŒÙ…Ø§Ù† ØªØ¨Ø±ÛŒØ²ÛŒØ§Ù†'},
          {username: '9331003', name: 'Ø¹Ø§Ø±Ù Ø­Ø³ÛŒÙ†ÛŒâ€ŒÚ©ÛŒØ§'},
          {username: '9331004', name: 'Ù…Ø§Ù†Ø§ Ù¾ÙˆØ³ØªÛŒâ€ŒØ²Ø§Ø¯Ù‡'},
          {username: '9331005', name: 'Ø¬Ø¹ÙØ± Ø¬Ø¹ÙØ±ÛŒ'},
          {username: '9331006', name: 'Ø§ØµØºØ± Ø§ØµØºØ±ÛŒ'},
          {username: '9331007', name: 'Ø³ÛŒØ¨ Ù‡ÙˆØ§ÛŒÛŒ'},
          {username: '9331008', name: 'Ø³ÛŒØ¨ Ø²Ù…ÛŒÙ†ÛŒ'},
          {username: '9331009', name: 'Ø§Ù…ÛŒØ± Ø­Ù‚ÛŒÙ‚ØªÛŒ Ù…Ù„Ú©ÛŒ'},
          {username: '9331010', name: 'Ú¯Ù„Ø§Ø¨ Ú¯Ù„Ø§Ø¨ÛŒ'},
          {username: '9331011', name: 'Ø¬Ø¹ÙØ± Ø¬Ø¹ÙØ±ÛŒ'},
          {username: '9331012', name: 'Ù…Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ÛŒ'},
        ]
      },
      checkFile(file) {
        if (this.composed.file !== '') {
          this.removeFlag = false;
          this.$refs.uploader.removeFile(file);
          this.showError({
            title: 'Ø®Ø·Ø§',
            message: 'Ø´Ù…Ø§ ØªÙ†Ù‡Ø§ Ù…ÛŒ ØªÙˆØ§Ù†ÛŒØ¯ ÛŒÚ© Ø¹Ú©Ø³ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù¾Ø³Øª Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯.',
            type: 'error'
          });
        }
      },
      removedFile() {
        // programmatically
        if (!this.removeFlag)
          this.removeFlag = true;
        // clicked by user
        else
          this.composed.file = '';
      },

      submitPost(e) {
        e.preventDefault();
        let image = e.target[3].files[0];
        if (image) {
          let reader = new FileReader();
          reader.readAsDataURL(image);
          // TODO : we dont need fileReader when we post the form into server
          reader.onload = (e) => {
            let imageURL = e.target.result;
            this.validateForm(imageURL);
          };
        } else {
          this.validateForm();
        }


      },
      validateForm(imgURL = '') {
        if (this.$refs.post.validate()) {
          // Finding the recipient
          let recipient = {}
          for (let i = 0; i < this.people.length; i++)
            if (this.people[i].username === this.composed.to)
              recipient = this.people[i]
          let content = {
            title: this.composed.title,
            body: this.composed.body,
            image: imgURL,
            user: this.$auth.user,
            to: recipient,
            approved: false,
            date: new Date(),
          };


          // Posting - TODO: complete this
          // this.$axios.post('/post/add', {data: content}).then(e => {
          this.posts.push(content)
          this.showSubmissionSuccess()
          this.$refs.post.reset()
          this.$vuetify.goTo(99999999, {
              duration: 300,
              offset: +1000,
              easing: 'easeInOutCubic'
          })
          // }).catch(r => {
          //   this.showError()
          // })
        }
      },
      removePost(index) {
        if (this.posts[index].user.username === this.$auth.user.username) {
          if (window.confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) {
            // Deleting - TODO: complete this
            // this.$axios.delete('/posts/' + posts[index]._id).then(e => {
            this.posts.splice(index, 1);
            this.$nuxt.$router.replace({'path': '/content'})
            this.showDeletionSuccess()
            // }).catch(r => {
            //   this.showError()
            // })
          }
        }
      }
    },
    components: {Post}
  }
</script>

<style lang="scss" scoped>
  .editor-container {
    width: 100%;
    /*margin: 0 auto;*/
    padding: 5px 0;

    .quill-editor {
      min-height: 200px;
      max-height: 400px;
      overflow-y: auto;
    }
  }

</style>
